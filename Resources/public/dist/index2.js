import{_ as l,m as u,b as _,c as r,a as t,F as h,r as m,d as p,o as a,t as d,e as f,w as x,f as b}from"./main.js";const g={name:"ProductIndex",data(){return{products:[]}},computed:{..._("auth",{isAuthenticated:s=>!!s.user})},methods:{...u("cart",["addItem"]),formatPrice(s){return Number(s).toFixed(2)},async addToCart(s){if(!this.isAuthenticated){this.$router.push("/auth/login");return}try{const e=await this.addItem({productId:s,quantity:1});e.success?this.$toast.success("Product added to cart"):this.$toast.error(e.error||"Failed to add product to cart")}catch(e){console.error("Error adding to cart:",e),this.$toast.error("Failed to add product to cart")}}},async created(){try{const s=await this.$axios.get("/products");this.products=s.data.products}catch(s){console.error("Error fetching products:",s),this.$toast.error("Failed to load products")}}},v={class:"container mt-4"},y={class:"row"},k={class:"card h-100"},w=["src","alt"],$={class:"card-body d-flex flex-column"},C={class:"card-title"},F={class:"card-text flex-grow-1"},A={class:"mt-auto"},N={class:"card-text"},P={class:"d-flex justify-content-between align-items-center"},I=["onClick","disabled"],V={key:1,class:"col-12"};function B(s,e,E,T,c,i){const n=p("router-link");return a(),r("div",v,[e[2]||(e[2]=t("h1",{class:"mb-4"},"Our Products",-1)),t("div",y,[c.products&&c.products.length?(a(!0),r(h,{key:0},m(c.products,o=>(a(),r("div",{key:o.id,class:"col-md-4 mb-4"},[t("div",k,[t("img",{src:o.image,alt:o.name,class:"card-img-top"},null,8,w),t("div",$,[t("h5",C,d(o.name),1),t("p",F,d(o.description),1),t("div",A,[t("p",N,[t("strong",null,"$"+d(i.formatPrice(o.price)),1)]),t("div",P,[f(n,{to:`/products/${o.id}`,class:"btn btn-primary"},{default:x(()=>e[0]||(e[0]=[b(" View Details ")])),_:2},1032,["to"]),t("button",{class:"btn btn-success",onClick:D=>i.addToCart(o.id),disabled:!s.isAuthenticated}," Add to Cart ",8,I)])])])])]))),128)):(a(),r("div",V,e[1]||(e[1]=[t("p",{class:"text-center"},"No products available.",-1)])))])])}const j=l(g,[["render",B],["__scopeId","data-v-e6a2e4de"]]);export{j as default};

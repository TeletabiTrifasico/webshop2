import{_ as u,m as p,b as m,c as s,a as o,g as h,t as n,h as _,v as f,f as c,e as y,w as g,d as b,o as d}from"./main.js";const v={name:"ProductDetail",data(){return{product:null,quantity:1}},computed:{...m("auth",{isAuthenticated:t=>!!t.user})},methods:{...p("cart",["addItem"]),formatPrice(t){return Number(t).toFixed(2)},async addToCart(){if(!this.isAuthenticated){this.$router.push("/auth/login");return}try{const t=await this.addItem({productId:this.product.id,quantity:this.quantity});t.success?this.$toast.success("Product added to cart"):this.$toast.error(t.error||"Failed to add product to cart")}catch(t){console.error("Error adding to cart:",t),this.$toast.error("Failed to add product to cart")}}},async created(){try{const t=await this.$axios.get(`/products/${this.$route.params.id}`);this.product=t.data.product}catch(t){console.error("Error fetching product:",t),this.$toast.error("Failed to load product details")}}},k={class:"container mt-4"},w={key:0,class:"row"},x={class:"col-md-6"},C=["src","alt"],A={class:"col-md-6"},q={class:"lead"},N={class:"d-flex align-items-center mb-3"},P=["disabled"],T={key:0,class:"alert alert-warning mt-3"},V={key:1,class:"text-center"};function F(t,e,B,D,r,a){const l=b("router-link");return d(),s("div",k,[r.product?(d(),s("div",w,[o("div",x,[o("img",{src:r.product.image,alt:r.product.name,class:"img-fluid rounded"},null,8,C)]),o("div",A,[o("h1",null,n(r.product.name),1),o("p",q,"$"+n(a.formatPrice(r.product.price)),1),o("p",null,n(r.product.description),1),o("div",N,[e[2]||(e[2]=o("label",{class:"me-2"},"Quantity:",-1)),_(o("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=i=>r.quantity=i),min:"1",class:"form-control w-25"},null,512),[[f,r.quantity,void 0,{number:!0}]])]),o("button",{class:"btn btn-primary btn-lg",onClick:e[1]||(e[1]=(...i)=>a.addToCart&&a.addToCart(...i)),disabled:!t.isAuthenticated}," Add to Cart ",8,P),t.isAuthenticated?h("",!0):(d(),s("div",T,[e[4]||(e[4]=c(" Please ")),y(l,{to:"/auth/login"},{default:g(()=>e[3]||(e[3]=[c("login")])),_:1}),e[5]||(e[5]=c(" to add items to cart "))]))])])):(d(),s("div",V,e[6]||(e[6]=[o("p",null,"Loading product details...",-1)])))])}const I=u(v,[["render",F]]);export{I as default};

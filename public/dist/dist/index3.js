import{_ as u,m as p,b as m,c as n,a as t,F as _,r as h,t as a,e as b,w as v,f as y,d as f,o as d,h as g,v as k}from"./main.js";const C={name:"Cart",computed:{...m("cart",["items"]),subtotal(){return this.items.reduce((o,s)=>o+s.product.price*s.quantity,0)},shipping(){return this.subtotal>50?0:5.99},total(){return this.subtotal+this.shipping}},methods:{...p("cart",["updateItem","removeItem"]),formatPrice(o){return Number(o).toFixed(2)},async updateQuantity(o,s){if(!(s<1))try{await this.updateItem({itemId:o,quantity:s}),this.$toast.success("Cart updated")}catch(l){console.error("Error updating cart:",l),this.$toast.error("Failed to update cart")}},async checkout(){try{const o=await this.$axios.post("/orders/create");this.$router.push(`/orders/${o.data.orderId}`)}catch(o){console.error("Error creating order:",o),this.$toast.error("Failed to create order")}}}},x={class:"container mt-4"},w={key:0,class:"row"},S={class:"col-md-8"},I={class:"card"},P={class:"card-body"},$={class:"row align-items-center"},q={class:"col-2"},F=["src","alt"],V={class:"col"},N={class:"mb-0"},j={class:"col-3"},B={class:"input-group"},E=["onClick","disabled"],Q=["onUpdate:modelValue"],T=["onClick"],D={class:"col-2 text-end"},U=["onClick"],A={class:"col-md-4"},L={class:"card"},M={class:"card-body"},O={class:"d-flex justify-content-between mb-2"},R={class:"d-flex justify-content-between mb-2"},Y={class:"d-flex justify-content-between mb-3"},z={key:1,class:"text-center"};function G(o,s,l,H,J,r){const c=f("router-link");return d(),n("div",x,[s[8]||(s[8]=t("h1",null,"Shopping Cart",-1)),o.items.length?(d(),n("div",w,[t("div",S,[t("div",I,[t("div",P,[(d(!0),n(_,null,h(o.items,e=>(d(),n("div",{key:e.id,class:"cart-item mb-3"},[t("div",$,[t("div",q,[t("img",{src:e.product.image,alt:e.product.name,class:"img-fluid rounded"},null,8,F)]),t("div",V,[t("h5",null,a(e.product.name),1),t("p",N,"$"+a(r.formatPrice(e.product.price)),1)]),t("div",j,[t("div",B,[t("button",{class:"btn btn-outline-secondary",onClick:i=>r.updateQuantity(e.id,e.quantity-1),disabled:e.quantity<=1}," - ",8,E),g(t("input",{type:"number","onUpdate:modelValue":i=>e.quantity=i,class:"form-control text-center",min:"1"},null,8,Q),[[k,e.quantity,void 0,{number:!0}]]),t("button",{class:"btn btn-outline-secondary",onClick:i=>r.updateQuantity(e.id,e.quantity+1)}," + ",8,T)])]),t("div",D,[t("button",{class:"btn btn-danger btn-sm",onClick:i=>o.removeItem(e.id)}," Remove ",8,U)])])]))),128))])])]),t("div",A,[t("div",L,[t("div",M,[s[4]||(s[4]=t("h5",{class:"card-title"},"Order Summary",-1)),t("div",O,[s[1]||(s[1]=t("span",null,"Subtotal:",-1)),t("span",null,"$"+a(r.formatPrice(r.subtotal)),1)]),t("div",R,[s[2]||(s[2]=t("span",null,"Shipping:",-1)),t("span",null,"$"+a(r.formatPrice(r.shipping)),1)]),s[5]||(s[5]=t("hr",null,null,-1)),t("div",Y,[s[3]||(s[3]=t("strong",null,"Total:",-1)),t("strong",null,"$"+a(r.formatPrice(r.total)),1)]),t("button",{class:"btn btn-primary w-100",onClick:s[0]||(s[0]=(...e)=>r.checkout&&r.checkout(...e))}," Proceed to Checkout ")])])])])):(d(),n("div",z,[s[7]||(s[7]=t("p",null,"Your cart is empty",-1)),b(c,{to:"/products",class:"btn btn-primary"},{default:v(()=>s[6]||(s[6]=[y(" Continue Shopping ")])),_:1})]))])}const W=u(C,[["render",G],["__scopeId","data-v-9c35e674"]]);export{W as default};

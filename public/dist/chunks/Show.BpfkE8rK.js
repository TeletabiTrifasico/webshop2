import{_ as u,m as p,g as m,c as n,a as e,t as d,f as h,h as y,v as _,d as l,b,w as g,r as f,o as i}from"../main.js";const v={name:"ProductShow",data(){return{product:null,quantity:1,loading:!0,error:null}},computed:{...m("auth",{isAuthenticated:r=>!!r.user})},methods:{...p("cart",["addItem"]),formatPrice(r){return Number(r).toFixed(2)},async fetchProduct(){try{const r=await this.$axios.get(`/api/products/${this.$route.params.id}`);this.product=r.data.product}catch(r){console.error("Error fetching product:",r),this.error="Failed to load product"}finally{this.loading=!1}},async addToCart(){if(!this.isAuthenticated){this.$router.push("/auth/login");return}try{await this.addItem({productId:this.product.id,quantity:this.quantity}),alert("Product added to cart")}catch(r){console.error("Error adding to cart:",r),alert("Failed to add product to cart")}}},created(){this.fetchProduct()}},k={class:"container mt-4"},w={key:0,class:"text-center"},x={key:1,class:"alert alert-danger"},C={key:2,class:"row"},q={class:"col-md-6"},P=["src","alt"],A={class:"col-md-6"},N={class:"lead mb-4"},T={class:"mb-4"},V={class:"d-flex align-items-center mb-4"},S={class:"input-group",style:{width:"150px"}},B=["disabled"],E={key:0,class:"alert alert-warning mt-3"};function F(r,t,I,D,o,a){const c=f("router-link");return i(),n("div",k,[o.loading?(i(),n("div",w,t[4]||(t[4]=[e("div",{class:"spinner-border",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1)]))):o.error?(i(),n("div",x,d(o.error),1)):(i(),n("div",C,[e("div",q,[e("img",{src:o.product.image,alt:o.product.name,class:"img-fluid rounded"},null,8,P)]),e("div",A,[e("h1",null,d(o.product.name),1),e("p",N,"$"+d(a.formatPrice(o.product.price)),1),e("p",T,d(o.product.description),1),e("div",V,[e("div",S,[e("button",{class:"btn btn-outline-secondary",onClick:t[0]||(t[0]=s=>o.quantity>1&&o.quantity--)},"-"),y(e("input",{type:"number",class:"form-control text-center","onUpdate:modelValue":t[1]||(t[1]=s=>o.quantity=s),min:"1"},null,512),[[_,o.quantity,void 0,{number:!0}]]),e("button",{class:"btn btn-outline-secondary",onClick:t[2]||(t[2]=s=>o.quantity++)},"+")])]),e("button",{class:"btn btn-primary btn-lg",onClick:t[3]||(t[3]=(...s)=>a.addToCart&&a.addToCart(...s)),disabled:!r.isAuthenticated}," Add to Cart ",8,B),r.isAuthenticated?h("",!0):(i(),n("div",E,[t[6]||(t[6]=l(" Please ")),b(c,{to:"/auth/login"},{default:g(()=>t[5]||(t[5]=[l("login")])),_:1}),t[7]||(t[7]=l(" to add items to cart "))]))])]))])}const M=u(v,[["render",F]]);export{M as default};
